import type {} from "@mui/material/themeCssVarsAugmentation";
import React from "react";
import { Box, Typography, Link } from "@mui/material";
import { useTheme, useColorScheme } from "@mui/material/styles";
import { useLogoContext } from "@/contexts/LogoContext";

// Define tenant types
export type TenantType = "wiley" | "sage" | "ieee" | "default";

// Tenant logo configurations
const tenantLogos: Record<
  TenantType,
  {
    viewBox: string;
    width: number;
    height: number;
    path: React.ReactNode;
  }
> = {
  wiley: {
    viewBox: "0 0 134 29",
    width: 134,
    height: 29,
    path: (
      <path
        d="M45.966 23.9209C45.966 25.6725 45.574 26.7985 44.3396 27.4908V27.7577H51.9964V27.5241C50.762 26.8318 50.3783 25.7058 50.3783 23.9543V9.03262C50.3783 7.36446 50.762 6.20509 51.9964 5.4711V5.23756H44.3396V5.43774C45.574 6.17173 45.966 7.29773 45.966 8.99925V23.9209ZM80.0381 27.7577L81.1141 23.0285L80.8806 22.9534C79.5711 25.0052 77.5442 25.856 74.5833 25.856H65.8421V9.2328C65.8421 7.3311 66.3092 6.23846 67.6187 5.4711V5.23756H59.9285V5.43774C61.1296 6.17173 61.4716 7.25603 61.4716 8.77406V24.1211C61.4716 25.7142 61.1296 26.7568 59.9285 27.4574V27.6909L80.0381 27.7577ZM117.313 27.4908L117.355 27.7243H125.095V27.4908C123.811 26.7568 123.427 25.5891 123.427 23.7291V18.4577L130.233 8.72401C131.476 6.93908 132.518 5.85478 133.402 5.4711V5.23756H127.405V5.43774C128.49 6.05496 128.64 7.56464 127.48 9.2328L122.476 16.4476L116.988 8.34034C116.154 7.09756 116.287 5.97155 117.296 5.43774V5.23756H108.839V5.43774C109.848 5.86312 110.465 6.43864 111.55 7.99002L119.056 18.7329V23.7374C119.056 25.5974 118.631 26.7651 117.388 27.4991M90.3974 14.8878V7.17262H98.4379C102.116 7.17262 103.509 7.75648 104.819 9.61647L105.052 9.54141L104.585 5.23756H84.4838V5.43774C85.6848 6.17173 86.0352 7.25603 86.0352 8.77406V24.1211C86.0352 25.7142 85.6848 26.7568 84.4838 27.4574V27.6909H105.636L106.412 23.1202L106.212 23.0368C104.86 24.8634 103.234 25.7892 99.5973 25.7892H90.4224V16.7145H96.5696C99.1969 16.7145 100.515 17.1399 101.215 18.2659H101.466V13.3782H101.199C100.498 14.5042 99.1802 14.9296 96.5529 14.9296L90.3974 14.8878ZM28.759 28.5H28.9508L38.4593 4.72878C39.3935 2.4434 40.2443 1.3174 41.095 0.816951V0.583407H35.3649V0.816951C36.566 1.47587 36.8412 3.2608 36.0238 5.31263L30.1853 19.9674L22.2282 0.5H22.0363L13.6956 19.934L7.71522 4.65371C7.02294 2.82708 7.21478 1.47587 8.34078 0.816951V0.583407H0V0.816951C0.892464 1.27569 1.55139 2.24322 2.36044 4.22833L12.1859 28.5H12.3777L20.6518 8.84078L28.759 28.5Z"
        fill="currentColor"
      />
    ),
  },
  sage: {
    viewBox: "0 0 117.83 40.58",
    width: 118,
    height: 41,
    path: (
      <g>
        <g>
          <g>
            <path
              className="cls-1"
              d="m21.8,31.31c4.07-.17,6.32-2.38,6.32-5.61s-2.4-5.79-5.82-7.48l-11.78-5.8c-2.27-1.13-3.52-2.48-3.78-4.12-4.07.17-6.32,2.38-6.32,5.61s2.4,5.79,5.82,7.48l11.78,5.8c2.27,1.13,3.52,2.48,3.78,4.12Z"
              fill="currentColor"
            />
            <path
              className="cls-1"
              d="m2.84,7.46C5.8,3.31,9.14,0,14.54,0c4.23,0,9.82,1.45,14.01,5.02l-5.75,7.42C18.07,7.96,8.11,5.1,2.84,7.46Z"
              fill="currentColor"
            />
            <path
              className="cls-1"
              d="m25.71,32.15c-2.97,4.15-6.3,7.46-11.7,7.46-4.23,0-9.82-1.45-14.01-5.02l5.75-7.42c4.73,4.49,14.69,7.34,19.96,4.98Z"
              fill="currentColor"
            />
          </g>
          <g>
            <path
              className="cls-1"
              d="m69.89,13.38c-2.39,0-5.76.78-7.71,1.95v4.78c1.66-1.37,4.54-2.2,6.88-2.2,2.15,0,4.2.63,4.2,2.34v.82l-3.95.4c-5.13.59-8.54,2.2-8.54,6.25,0,3.71,3.03,5.57,6.59,5.57,2.73,0,4.93-1.27,6.25-3.22l.44,2.59h3.95v-11.86c0-4.98-3.37-7.42-8.1-7.42Zm-1.03,16.21c-1.66,0-3.08-.73-3.08-2.29,0-1.41,1.51-2.06,3.51-2.35l3.95-.62v1.07c0,2.73-2,4.2-4.39,4.2Z"
              fill="currentColor"
            />
            <path
              className="cls-1"
              d="m52.32,17.94c-3.71-1.03-6.25-1.76-6.25-3.9,0-2,1.81-3.07,4.39-3.12,2.64,0,4.88.92,7.32,2.38v-5.22c-2.11-1.13-4.44-1.75-7.36-1.81-5.37,0-9.63,2.93-9.63,8.15,0,4.2,2.68,6.1,7.13,7.27,3.56.93,5.86,1.66,5.86,3.86s-2.1,3.14-4.49,3.14c-2.85,0-6-1.14-8.45-2.9v5.52c1.75,1.12,5.02,1.94,8.49,2,5.27.05,9.47-2.39,9.71-7.66.2-4.25-2.34-6.49-6.74-7.71Z"
              fill="currentColor"
            />
            <path
              className="cls-1"
              d="m91.93,28.72l-5.27-.05c-1.32,0-2.05-.44-2-1.27.05-.47.37-.77.83-.95,1.08.41,2.32.61,3.66.61,4.64,0,8.15-2.73,8.15-6.83,0-1.89-.73-3.53-2.01-4.74h3.28v-4.44c-2.74-.31-4.81,1.06-5.71,2.94-1.09-.43-2.33-.65-3.67-.65-4.59,0-8.15,2.73-8.15,6.83,0,1.82.59,3.39,1.72,4.56-1.48.85-2.31,2.13-2.31,3.74,0,1.41.66,2.51,1.64,3.25-1.49.61-2.47,1.92-2.47,3.68,0,3.86,4.39,5.17,9.28,5.17,5.66,0,10.06-1.95,10.06-6.49,0-3.71-2.93-5.32-7.03-5.37Zm-2.78-11.33c2.05,0,3.42,1.17,3.42,2.78,0,1.76-1.51,2.83-3.42,2.83-2.05,0-3.32-1.22-3.32-2.83,0-1.76,1.46-2.78,3.32-2.78Zm.15,19.14c-2.64,0-4.88-.34-4.88-1.9,0-.77.55-1.32,1.34-1.6l5.4.04c1.86.05,3.22.24,3.22,1.32,0,1.61-2.73,2.15-5.08,2.15Z"
              fill="currentColor"
            />
            <path
              className="cls-1"
              d="m108.96,13.33c-5.66,0-9.71,4.34-9.71,10.11s4.2,9.91,10.2,9.91c2.49,0,5.52-.59,7.47-1.71v-4.54c-1.61,1.27-4.15,2-6.54,2-3.32,0-5.26-1.41-5.86-4.15h13.18c.59-4.88-.67-11.62-8.74-11.62Zm-4.53,8.25c.4-2.44,1.93-3.86,4.34-3.86s3.76,1.61,3.81,3.86h-8.14Z"
              fill="currentColor"
            />
          </g>
        </g>
      </g>
    ),
  },
  ieee: {
    viewBox: "0 0 390 120",
    width: 195 * 0.7,
    height: 60 * 0.7,
    path: (
      <g>
        <g transform="translate(-1 1) translate(64 179) matrix(1 0 0 1 -67.48 -176)">
          <path
            d="m135.13,99.9l0,-84.2l23.32,0l0,84.2l-23.32,0l0,0"
            fill="currentColor"
            fillRule="nonzero"
          />
          <path
            d="m170.69,99.9l0,-84.2l64.13,0l0,16.32l-40.81,0l0,17.37l37.55,0l0,16.33l-37.55,0l0,17.84l40.81,0l0,16.33l-64.13,0l0,0"
            fill="currentColor"
            fillRule="nonzero"
          />
          <path
            d="m247.89,99.9l0,-84.2l64.12,0l0,16.32l-40.8,0l0,17.37l37.53,0l0,16.33l-37.53,0l0,17.84l40.8,0l0,16.33l-64.12,0l0,0"
            fill="currentColor"
            fillRule="nonzero"
          />
          <path
            d="m325.07,99.9l0,-84.2l64.14,0l0,16.32l-40.8,0l0,17.37l37.54,0l0,16.33l-37.54,0l0,17.84l40.8,0l0,16.33l-64.14,0l0,0"
            fill="currentColor"
            fillRule="nonzero"
          />
          <path
            d="m61.2,66.25c-0.31,5.95 -0.38,11.45 -0.82,17.41c2.35,0.21 5.01,0.42 7.52,0.05l-0.75,-16.61l-0.13,-0.79c-1.91,0.07 -3.72,0.15 -5.81,-0.06l-0.01,0zm-14.7,-16.69c-2.9,1.45 -7.16,3.65 -6.69,7.62c0.62,2.17 2.97,3.57 4.83,4.47c10.28,4.53 23.92,4.68 34.78,1.3c2.68,-1.03 6.27,-2.53 6.77,-5.81c-0.03,-2.71 -2.9,-4.42 -4.96,-5.46l0,-0.13c0.72,-0.29 1.55,-0.54 2.29,-0.62l0,-0.07c-3.64,-0.65 -7.14,-1.6 -10.67,-2.53c0.68,1.55 1.17,3.17 1.73,4.78c1.06,-0.34 2.14,-0.59 3.28,-0.75c1.86,0.72 4.51,1.75 4.78,4.08c0.21,2.17 -2.17,3.23 -3.67,4.11c-7.96,2.9 -16.91,3.18 -25.22,0.98c-2.29,-0.72 -5.6,-1.65 -5.89,-4.57c1.63,-3.84 5.84,-4.64 9.35,-5.58c-1.81,-1.16 -3.64,-2.19 -5.39,-3.49c-1.89,0.11 -3.62,0.93 -5.33,1.68l0.01,-0.01zm17.59,-23.19l-1.03,3.31l-5.17,14.8c1.29,0.13 2.9,0 4.17,0.13l0,0.12l-0.76,16.74l0.13,0.18c1.65,0.16 3.72,0.25 5.4,-0.04l0,-0.26l-0.67,-16.24l0.1,-0.55l4.55,-0.08c-2.27,-5.99 -4.47,-12.04 -6.59,-18.11l-0.13,0zm-2.4,-7.44c3.8,-2.59 7.21,1.03 10.16,3.1c11.39,9.17 22.14,19.66 30.32,31.51c1.03,1.53 1.5,3.9 0.57,5.63c-2.12,3.54 -4.99,6.77 -7.7,10.05l0,0.18c-6.77,7.21 -13.92,14.62 -21.65,20.72c-3.77,2.3 -7.23,7.31 -12.09,4.2c-11.06,-8.08 -21.64,-18.13 -30.62,-28.91c-1.52,-2.37 -3.9,-4.31 -4.95,-7c-1.48,-3.64 1.78,-6.25 3.64,-8.99c9.15,-11.28 20.51,-22.35 32.31,-30.5l0.01,0.01zm9.53,-10.78l-4.21,-5.96c-0.52,-0.32 -1.16,-0.84 -1.73,-0.99c-1.24,-0.54 -2.58,0.11 -3.59,0.88l-7.62,9.92c-12.22,15.13 -26.69,29.27 -42.47,40.1c-1.25,0.97 -3.1,1.93 -3.49,3.53c-0.41,1.45 0.34,2.64 1.23,3.54c12.64,8.71 24.72,19.04 35.48,30.82c1.91,2.01 3.46,4 5.32,5.89c3.15,4.19 6.84,8.4 9.73,12.89c0.91,0.95 1.06,2.51 2.48,2.97c1.11,0.38 2.48,0.64 3.54,0l1.05,-1.06c13.08,-18.53 29.66,-35.16 48.19,-48.59c1.86,-1.66 5.4,-2.27 5.45,-5.35c-0.13,-1.42 -0.96,-2.81 -2.17,-3.59l-0.3,-0.05c-9.54,-6.49 -18.42,-13.82 -26.79,-22.14l-9.25,-9.66c-3.75,-4.15 -7.39,-8.75 -10.85,-13.15zm-10.9,8.5c3.72,-2.89 8.39,-0.49 11.52,2.17c3.28,2.51 6.69,5.34 9.68,8.24l0.54,0.31c8.29,7.69 16,16.25 22.32,25.29c1.03,1.57 1.93,3.36 1.36,5.44c-2.11,5.28 -6.4,9.48 -10.15,14.09c-8.11,8.73 -16.67,17.18 -26.24,23.92c-1.94,1.37 -4.55,2.63 -6.87,1.55c-7.05,-3.69 -13,-9.73 -19.17,-15.24c-7.16,-6.64 -14.34,-14.36 -19.76,-22.44c-0.81,-1.14 -1.03,-2.53 -1.01,-4.03c0.7,-2.79 2.61,-5.09 4.42,-7.44c6.41,-8.17 14.26,-15.91 22.19,-22.99c0.18,-0.18 0.52,-0.57 0.81,-0.75c3.4,-2.94 6.79,-5.55 10.35,-8.11l0,0"
            fill="currentColor"
            fillRule="nonzero"
          />
          <path
            d="m83.3,103.78l-0.8,0l0,-1.02l0.63,0c0.34,0 0.81,0.03 0.81,0.47c0,0.46 -0.24,0.55 -0.64,0.55zm1.6,-0.46c0,-0.96 -0.64,-1.27 -1.73,-1.27l-1.57,0l0,4.21l0.9,0l0,-1.77l0.43,0l0.97,1.77l1.07,0l-1.09,-1.85c0.57,-0.05 1.02,-0.32 1.02,-1.1l0,0.01zm-1.75,3.85l0,-0.01c-1.55,0.01 -2.8,-1.19 -2.8,-3c0,-1.8 1.25,-3 2.8,-3c1.51,0 2.8,1.2 2.8,3c0,1.81 -1.29,3.01 -2.8,3.01zm0,-6.92c-2.08,0 -3.93,1.44 -3.93,3.91c0,2.47 1.85,3.92 3.93,3.92c2.07,0 3.92,-1.45 3.92,-3.92c0,-2.47 -1.85,-3.91 -3.92,-3.91"
            fill="currentColor"
            fillRule="evenodd"
          />
        </g>
      </g>
    ),
  },
  default: {
    viewBox: "0 0 134 29",
    width: 134,
    height: 29,
    path: (
      <path
        d="M45.966 23.9209C45.966 25.6725 45.574 26.7985 44.3396 27.4908V27.7577H51.9964V27.5241C50.762 26.8318 50.3783 25.7058 50.3783 23.9543V9.03262C50.3783 7.36446 50.762 6.20509 51.9964 5.4711V5.23756H44.3396V5.43774C45.574 6.17173 45.966 7.29773 45.966 8.99925V23.9209ZM80.0381 27.7577L81.1141 23.0285L80.8806 22.9534C79.5711 25.0052 77.5442 25.856 74.5833 25.856H65.8421V9.2328C65.8421 7.3311 66.3092 6.23846 67.6187 5.4711V5.23756H59.9285V5.43774C61.1296 6.17173 61.4716 7.25603 61.4716 8.77406V24.1211C61.4716 25.7142 61.1296 26.7568 59.9285 27.4574V27.6909L80.0381 27.7577ZM117.313 27.4908L117.355 27.7243H125.095V27.4908C123.811 26.7568 123.427 25.5891 123.427 23.7291V18.4577L130.233 8.72401C131.476 6.93908 132.518 5.85478 133.402 5.4711V5.23756H127.405V5.43774C128.49 6.05496 128.64 7.56464 127.48 9.2328L122.476 16.4476L116.988 8.34034C116.154 7.09756 116.287 5.97155 117.296 5.43774V5.23756H108.839V5.43774C109.848 5.86312 110.465 6.43864 111.55 7.99002L119.056 18.7329V23.7374C119.056 25.5974 118.631 26.7651 117.388 27.4991M90.3974 14.8878V7.17262H98.4379C102.116 7.17262 103.509 7.75648 104.819 9.61647L105.052 9.54141L104.585 5.23756H84.4838V5.43774C85.6848 6.17173 86.0352 7.25603 86.0352 8.77406V24.1211C86.0352 25.7142 85.6848 26.7568 84.4838 27.4574V27.6909H105.636L106.412 23.1202L106.212 23.0368C104.86 24.8634 103.234 25.7892 99.5973 25.7892H90.4224V16.7145H96.5696C99.1969 16.7145 100.515 17.1399 101.215 18.2659H101.466V13.3782H101.199C100.498 14.5042 99.1802 14.9296 96.5529 14.9296L90.3974 14.8878ZM28.759 28.5H28.9508L38.4593 4.72878C39.3935 2.4434 40.2443 1.3174 41.095 0.816951V0.583407H35.3649V0.816951C36.566 1.47587 36.8412 3.2608 36.0238 5.31263L30.1853 19.9674L22.2282 0.5H22.0363L13.6956 19.934L7.71522 4.65371C7.02294 2.82708 7.21478 1.47587 8.34078 0.816951V0.583407H0V0.816951C0.892464 1.27569 1.55139 2.24322 2.36044 4.22833L12.1859 28.5H12.3777L20.6518 8.84078L28.759 28.5Z"
        fill="currentColor"
      />
    ),
  },
};

interface PrimaryLogoProps {
  /** The affix text to show next to the logo. If not provided, affix is hidden. */
  affix?: string;
  /** The tenant type to determine which logo to display. If not provided, uses context value. */
  tenant?: TenantType;
  /** Override the logo color. If not provided, uses theme-based color. */
  color?: string;
}

/**
 * PrimaryLogo component renders tenant-specific logos with an optional affix text.
 * Supports multiple tenants with different logo designs and maintains theme responsiveness.
 * If no tenant is specified, it uses the tenant from LogoContext.
 */
export default function PrimaryLogo({
  affix,
  tenant,
  color,
}: PrimaryLogoProps) {
  const theme = useTheme();
  const { mode, systemMode } = useColorScheme();
  const { currentTenant } = useLogoContext();

  // If affix is not provided, do not show the affix section
  const showAffix = Boolean(affix);

  // Use provided tenant or fall back to context tenant
  const activeTenant = tenant || currentTenant;

  // Get the logo configuration for the selected tenant
  const logoConfig = tenantLogos[activeTenant];

  // Determine SVG fill color based on current color scheme or override
  // Handle system mode by checking systemMode
  const currentMode = mode === "system" ? systemMode : mode;

  const getLogoColor = () => {
    if (color) return color; // Override color takes precedence

    if (currentMode === "dark") {
      return "white"; // All logos use white in dark mode
    }

    // Light mode colors - tenant specific
    switch (activeTenant) {
      case "sage":
        return "#001F83";
      case "ieee":
        return "#00629B";
      case "wiley":
      case "default":
      default:
        return "black";
    }
  };

  const logoFillColor = getLogoColor();

  return (
    <Box display="flex" flexDirection="row" alignItems="center" gap={2}>
      <Box
        maxHeight={40}
        maxWidth={300}
        display="flex"
        alignItems="center"
        justifyContent="center"
      >
        <Link
          href="/"
          underline="none"
          sx={{ display: "flex", maxWidth: "100%", maxHeight: "100%" }}
        >
          <svg
            viewBox={logoConfig.viewBox}
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            preserveAspectRatio="xMidYMid meet"
            style={{
              color: logoFillColor,
              width: "100%",
              height: "100%",
              maxWidth: "300px",
              maxHeight: "40px",
            }}
          >
            {logoConfig.path}
          </svg>
        </Link>
      </Box>
      {showAffix && (
        <Box display="flex" flexDirection="row" alignItems="center" gap={2}>
          <Box
            sx={{
              width: "2px",
              height: 42,
              bgcolor: (theme.vars || theme).palette.divider,
              borderRadius: 1,
              mx: 2,
            }}
          />
          <Typography
            sx={{
              fontFamily: "'Open Sans', sans-serif",
              fontWeight: 400,
              fontSize: 24,
              lineHeight: "24px",
              color: "text.primary",
              whiteSpace: "nowrap",
            }}
          >
            {affix ?? "{site.name}"}
          </Typography>
        </Box>
      )}
    </Box>
  );
}
